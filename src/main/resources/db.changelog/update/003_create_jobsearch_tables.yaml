databaseChangeLog:
  - changeSet:
      id: create-employers-table
      author: Asem
      changes:
        - createTable:
            tableName: employers
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: userId
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: companyName
                  type: varchar(255)
  - changeSet:
      id: add new fk_e_user_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: employers
            baseColumnNames: userid
            constraintName: fk_e_user_id
            referencedTableName: users
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-applicants-table
      author: Asem
      changes:
        - createTable:
            tableName: applicants
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: userId
                  type: varchar(255)
              - column:
                  name: firstName
                  type: varchar(255)
              - column:
                  name: lastName
                  type: varchar(255)
              - column:
                  name: dateOfBirth
                  type: date
  - changeSet:
      id: add new fk_a_user_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: applicants
            baseColumnNames: userid
            constraintName: fk_a_user_id
            referencedTableName: users
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-categories-table
      author: Asem
      changes:
        - createTable:
            tableName: categories
            columns:
              - column:
                  name: category
                  type: varchar(255)
                  constraints:
                    primaryKey: true
                    nullable: false
  - changeSet:
      id: create-resumes-table
      author: Asem
      changes:
        - createTable:
            tableName: resumes
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: applicantId
                  type: long
              - column:
                  name: resumeTitle
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: category
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_r_category_name
                    references: categories(category)
              - column:
                  name: expectedSalary
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: isActive
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: isPublished
                  type: boolean
                  constraints:
                    nullable: false
  - changeSet:
      id: add new fk_applicant_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: resumes
            baseColumnNames: applicantid
            constraintName: fk_applicant_id
            referencedTableName: applicants
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-workexperience-table
      author: Asem
      changes:
        - createTable:
            tableName: workexperience
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: resumeId
                  type: long
              - column:
                  name: dateStart
                  type: date
                  constraints:
                    nullable: false
              - column:
                  name: dateEnd
                  type: date
                  constraints:
                    nullable: false
              - column:
                  name: companyName
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: position
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: responsibilities
                  type: varchar(255)
                  constraints:
                    nullable: false
  - changeSet:
      id: add new fk_we_resume_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: workexperience
            baseColumnNames: resumeId
            constraintName: fk_we_resume_id
            referencedTableName: resumes
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-education-table
      author: Asem
      changes:
        - createTable:
            tableName: education
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: resumeId
                  type: long
              - column:
                  name: education
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: schoolName
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: startDate
                  type: date
                  constraints:
                    nullable: false
              - column:
                  name: graduationDate
                  type: date
                  constraints:
                    nullable: false
  - changeSet:
      id: add new fk_edu_resume_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: education
            baseColumnNames: resumeId
            constraintName: fk_edu_resume_id
            referencedTableName: resumes
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-vacancies-table
      author: Asem
      changes:
        - createTable:
            tableName: vacancy
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: employer_id
                  type: long
              - column:
                  name: vacancy_name
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: category
                  type: varchar(255)
                  constraints:
                    nullable: false
                    foreignKeyName: fk_v_category_name
                    references: categories(category)
              - column:
                  name: salary
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: varchar(255)
                  constraints:
                    nullable: false
              - column:
                  name: required_experience_min
                  type: int
                  constraints:
                    nullable: false
              - column:
                  name: required_experience_max
                  type: int
                  constraints:
                    nullable: false
              - column:
                  name: is_active
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: is_published
                  type: boolean
                  constraints:
                    nullable: false
              - column:
                  name: published_date_time
                  type: timestamp(6)
  - changeSet:
      id: add new fk_employer_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: vacancy
            baseColumnNames: employer_id
            constraintName: fk_employer_id
            referencedTableName: employers
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: create-jobapplications-table
      author: Asem
      changes:
        - createTable:
            tableName: jobapplications
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: vacancy_id
                  type: long
              - column:
                  name: resumeId
                  type: long
              - column:
                  name: dateTime
                  type: timestamp(6)
                  constraints:
                    nullable: false
  - changeSet:
      id: add new fk_j_resumeId
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: jobapplications
            baseColumnNames: resumeId
            constraintName: fk_j_resumeId
            referencedTableName: resumes
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade
  - changeSet:
      id: add new fk_vacancy_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: jobapplications
            baseColumnNames: vacancy_id
            constraintName: fk_vacancy_id
            referencedTableName: vacancy
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade

  - changeSet:
      id: create-contactinfo-table
      author: Asem
      changes:
        - createTable:
            tableName: contactinfo
            columns:
              - column:
                  name: id
                  type: long
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: resumeId
                  type: long
              - column:
                  name: telegram
                  type: varchar(255)
                  constraints:
                    nullable: true
              - column:
                  name: email
                  type: varchar(255)
                  constraints:
                    nullable: true
              - column:
                  name: phoneNumber
                  type: varchar(255)
                  constraints:
                    nullable: true
              - column:
                  name: facebook
                  type: varchar(255)
                  constraints:
                    nullable: true
              - column:
                  name: linkedIn
                  type: varchar(255)
                  constraints:
                    nullable: true
  - changeSet:
      id: add new fk_ci_resume_id
      author: Asem
      changes:
        - addForeignKeyConstraint:
            baseTableName: contactinfo
            baseColumnNames: resumeId
            constraintName: fk_ci_resume_id
            referencedTableName: resumes
            referencedColumnNames: id
            onDelete: cascade
            onUpdate: cascade